<!-- Autor: Gabriel Andres AvendaÃ±o Casadiego -->

<!DOCTYPE html>
<html>
  <head>
    <title>Inicio</title>

  </head>
  <body>
      <!-- Titulo -->
    <div class="header headerInicio">
      <div class="container ">
        <h1>MODELO DE CIUDAD INTELIGENTE</h1>
      </div>
    </div>
    
    <!-- Informacion -->
    <div class="main mainTop">
      <div class="container">
        
        <h2 id="titulo">Terminologiafasdfasd</h2>
        <p>Se refiere a un tipo de desarrollo urbano basado en la sostenibilidad. Capaz de responder a las necesidad humanas de manera economica, social y ambiental.</p>
        <p>Tiene como meta integrar a las ciudades con las tecnologias de la informacion y la internet de las cosas, asi como en los sistemas de gobierno.</p>
        <p>Fomentar las inversiones en el capital humano. Tales como infraestructura, transporte, servicios, tecnologia, educacion, entre otros.</p>
      </div>
    </div>
    
    <form>
    Persona: <input id="nombrePersona" type="text" name="Persona" value=""><br>
    Fecha: <input id="fechaEnvio" type="text" name="Fecha" value=""><br>
    Mensaje: <input id="texto" type="text" name="Mensaje" value="" onKeyUp="edValueKeyPress(event)"><br>
    </form>

    <!-- Pie de pagina -->
    <div class="footer">
      <div class="container">
        <p>&copy; Modelo Ciudad Inteligente</p>
      </div>
    </div>
      
<p id="demo">JavaScript can change HTML content.</p>

<button type="button" onclick='changer()'>Click Me!</button>
      
    <script src="https://www.gstatic.com/firebasejs/4.6.0/firebase.js"></script>
    
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBimu9MpFSjzsfz7kVrBBHfDWOmnLyXKJw",
            authDomain: "myef-3073f.firebaseapp.com",
            databaseURL: "https://myef-3073f.firebaseio.com",
            projectId: "myef-3073f",
            storageBucket: "myef-3073f.appspot.com",
            messagingSenderId: "511146896981"
        };
        firebase.initializeApp(config);
        
        
        var database = firebase.database();
        
        var chats = firebase.database().ref().child('chats');
        
        chats.on('child_added', function(snapshot) {
            document.getElementById("titulo").innerHTML =  snapshot.child('fecha').val();
        });
        
        function changer(){
            var nombrePersona = document.getElementById("nombrePersona").value;
            var fechaEnvio = document.getElementById("fechaEnvio").value;
            var texto = document.getElementById("texto").value;
            chats.push({
                persona: nombrePersona,
                fecha: fechaEnvio,
                mensaje : texto
            });
        };
        
        
        function edValueKeyPress(e){
            
                console.info("gaboaifjsoad");
            if (e.keyCode == 13) {
                changer();    
                return false;
            }
        }
      
    </script>
  </body>
</html>